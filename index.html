<!doctype html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Session Booking</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-purple-100 min-h-screen flex items-center justify-center p-6">

<div class="w-full max-w-2xl bg-white rounded-2xl shadow-2xl p-8">

  <!-- Language -->
  <div class="flex justify-end gap-3 mb-4 text-sm">
    <button onclick="switchLang('ja')" class="underline">日本語</button>
    <button onclick="switchLang('en')" class="underline">English</button>
  </div>

  <h1 class="text-3xl font-bold text-center mb-8 text-purple-900">
    Glico's Room
  </h1>

  <form
    action="https://formspree.io/f/xkorrgna"
    method="POST"
    class="space-y-6"
    onsubmit="return handleSubmit();"
  >

    <!-- Name -->
    <div>
      <label data-ja="お名前 *" data-en="Name *" class="font-medium">お名前 *</label>
      <input required name="name"
        class="w-full border-2 rounded-lg px-4 py-3 border-purple-400">
    </div>

    <!-- Email -->
    <div>
      <label data-ja="メールアドレス *" data-en="Email *" class="font-medium">メールアドレス *</label>
      <input required type="email" name="email"
        class="w-full border-2 rounded-lg px-4 py-3 border-purple-400">
    </div>

    <!-- 希望日 -->
    <div>
      <label class="font-medium">第一希望日 *</label>
      <div class="grid grid-cols-2 gap-3">
        <input type="date" name="第一希望日" required class="border-2 rounded-lg px-3 py-2">
        <input type="time" name="第一希望時間" required class="border-2 rounded-lg px-3 py-2">
      </div>
    </div>

    <div>
      <label class="font-medium">第二希望日</label>
      <div class="grid grid-cols-2 gap-3">
        <input type="date" name="第二希望日" class="border-2 rounded-lg px-3 py-2">
        <input type="time" name="第二希望時間" class="border-2 rounded-lg px-3 py-2">
      </div>
    </div>

    <!-- Menu -->
    <div>
      <label class="font-medium">メニュー *</label>
      <select id="menu" name="メニュー" required
        class="w-full border-2 rounded-lg px-4 py-3">
        <option value="">選択してください</option>
        <option value="BDSM">BDSM セッション</option>
        <option value="百巻夜行 mummy session（180分）36000円">
          百巻夜行 mummy session（180分）36000円
        </option>
        <option value="喫茶去 counseling（90分）20000円">
          喫茶去 counseling（90分）20000円
        </option>
      </select>
    </div>

    <!-- BDSM only -->
    <div id="bdsm-area" class="hidden space-y-3">
      <div class="font-bold text-red-700">
        【重要確認事項｜BDSMセッション】
      </div>

      <select name="利用時間" class="w-full border-2 rounded-lg px-4 py-3">
        <option value="">利用時間を選択</option>
        <option value="90分 30000円">90分 30000円</option>
        <option value="120分 39000円">120分 39000円</option>
        <option value="180分 46000円">180分 46000円</option>
      </select>

      <p data-ja="※ 内容によりデポジットをお願いする場合があります。"
         data-en="A deposit may be requested depending on session details."
         class="text-sm bg-purple-50 p-3 rounded">
        ※ 内容によりデポジットをお願いする場合があります。
      </p>
    </div>

    <!-- Agreement -->
    <label class="flex gap-2 text-sm">
      <input type="checkbox" id="agree" required>
      <span data-ja="ご利用上の注意を確認し同意します"
            data-en="I agree to the terms and conditions">
        ご利用上の注意を確認し同意します
      </span>
    </label>

    <!-- hidden -->
    <input type="hidden" name="同意状態" id="agreeStatus">
    <input type="hidden" name="同意時刻" id="agreeTime">
    <input type="hidden" name="自動挿入注意文" id="autoNote">

    <button class="w-full py-4 bg-purple-700 text-white rounded-lg font-bold">
      予約を送信
    </button>

  </form>
</div>

<script>
const menu = document.getElementById('menu');
const bdsm = document.getElementById('bdsm-area');
const autoNote = document.getElementById('autoNote');

menu.addEventListener('change', () => {
  if (menu.value === 'BDSM') {
    bdsm.classList.remove('hidden');
    autoNote.value = 'BDSMセッション：デポジットが発生する可能性あり';
  } else {
    bdsm.classList.add('hidden');
    autoNote.value = '通常メニュー';
  }
});

function handleSubmit() {
  document.getElementById('agreeStatus').value = '同意あり';
  document.getElementById('agreeTime').value = new Date().toISOString();
  return true;
}

function switchLang(lang) {
  document.querySelectorAll('[data-ja]').forEach(el => {
    el.textContent = el.dataset[lang];
  });
}
</script>

</body>
</html>
